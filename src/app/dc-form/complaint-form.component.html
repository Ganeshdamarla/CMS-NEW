<section class="section">
<app-navbar></app-navbar>
<div class="main-dc ">
  <div class="form-container-dc">
    <div class="form-title-dc-form">
      <h1>DC Form</h1>
    </div>

    <div class="top-data-display control-room-data">
      <div>
      <p><strong>Complaint ID:</strong> {{ complaintForm.get('complaintId')?.value }}</p>
      <p><strong>Complaint Details:</strong> {{ complaintForm.get('complaintDetails')?.value }}</p>
      <p><strong>Complaint Type:</strong> {{ complaintForm.get('complaintType')?.value }}</p>
      <p><strong>Attachments:</strong> {{ complaintForm.get('attachments')?.value }}</p>
    </div>
      <div>
      <p><strong>Mandal:</strong> {{ complaintForm.get('mandal')?.value }}</p>
      <p><strong>Village:</strong> {{ complaintForm.get('village')?.value }}</p>
      <p><strong>Received Time Stamp:</strong> {{ complaintForm.get('receivedTimeStamp')?.value }}</p>
    </div>
  </div>
  
    <form [formGroup]="complaintForm" (ngSubmit)="onSubmit()">
      <div class="form-row-dc-form">
        <div class="form-column-dc-form">
          <div *ngFor="let field of leftColumnFields" class="form-group">
            <div class="input-container-dc">
              <input *ngIf="field.type !== 'dropdown' && field.type !== 'readonly' && field.type !== 'textarea' && field.type !== 'file'"
                     [formControlName]="field.name"
                     [type]="field.type"
                     [readonly]="field.readonly"
                     [disabled]="field.disabled"
                     (focus)="onFocus(field.name)"
                     (blur)="onBlur(field.name)"
                     [ngClass]="{'active': isActive(field.name), 'error': complaintForm.get(field.name)?.invalid && complaintForm.get(field.name)?.touched}">
              <select *ngIf="field.type === 'dropdown'"
                      [formControlName]="field.name"
                      (focus)="onFocus(field.name)"
                      (blur)="onBlur(field.name)"
                      [ngClass]="{'active': isActive(field.name), 'error': complaintForm.get(field.name)?.invalid && complaintForm.get(field.name)?.touched}">
                <option *ngFor="let option of field.options" [value]="option">{{ option }}</option>
              </select>
              <textarea *ngIf="field.type === 'textarea'"
                        [formControlName]="field.name"
                        (focus)="onFocus(field.name)"
                        (blur)="onBlur(field.name)"
                        [ngClass]="{'active': isActive(field.name), 'error': complaintForm.get(field.name)?.invalid && complaintForm.get(field.name)?.touched}"></textarea>
              <input *ngIf="field.type === 'file'"
                     type="file"
                     [formControlName]="field.name"
                     (focus)="onFocus(field.name)"
                     (blur)="onBlur(field.name)"
                     [ngClass]="{'active': isActive(field.name), 'error': complaintForm.get(field.name)?.invalid && complaintForm.get(field.name)?.touched}">
              <div *ngIf="field.type === 'readonly' && field.value">{{ field.value }}</div>
              <label [ngClass]="{'active': isActive(field.name)}">{{ field.label }} <span class="star" *ngIf="!field.readonly && !field.disabled">*</span></label>
              <small class="error-message" *ngIf="complaintForm.get(field.name)?.invalid && complaintForm.get(field.name)?.touched">
                Please fill in the {{ field.label }} field.
              </small>
            </div>
          </div>
        </div>
        <div class="form-column-dc-form">
          <div *ngFor="let field of rightColumnFields" class="form-group">
            <div class="input-container-dc">
              <input *ngIf="field.type !== 'dropdown' && field.type !== 'readonly' && field.type !== 'textarea' && field.type !== 'file'"
                     [formControlName]="field.name"
                     [type]="field.type"
                     [readonly]="field.readonly"
                     [disabled]="field.disabled"
                     (focus)="onFocus(field.name)"
                     (blur)="onBlur(field.name)"
                     [ngClass]="{'active': isActive(field.name), 'error': complaintForm.get(field.name)?.invalid && complaintForm.get(field.name)?.touched}">
              <select *ngIf="field.type === 'dropdown'"
                      [formControlName]="field.name"
                      (focus)="onFocus(field.name)"
                      (blur)="onBlur(field.name)"
                      [ngClass]="{'active': isActive(field.name), 'error': complaintForm.get(field.name)?.invalid && complaintForm.get(field.name)?.touched}">
                <option *ngFor="let option of field.options" [value]="option">{{ option }}</option>
              </select>
              <textarea *ngIf="field.type === 'textarea'"
                        [formControlName]="field.name"
                        (focus)="onFocus(field.name)"
                        (blur)="onBlur(field.name)"
                        [ngClass]="{'active': isActive(field.name), 'error': complaintForm.get(field.name)?.invalid && complaintForm.get(field.name)?.touched}"></textarea>
              <input *ngIf="field.type === 'file'"
                     type="file"
                     [formControlName]="field.name"
                     (focus)="onFocus(field.name)"
                     (blur)="onBlur(field.name)"
                     [ngClass]="{'active': isActive(field.name), 'error': complaintForm.get(field.name)?.invalid && complaintForm.get(field.name)?.touched}">
              <div *ngIf="field.type === 'readonly' && field.value">{{ field.value }}</div>
              <label [ngClass]="{'active': isActive(field.name)}">{{ field.label }} <span class="star" *ngIf="!field.readonly && !field.disabled">*</span></label>
              <small class="error-message" *ngIf="complaintForm.get(field.name)?.invalid && complaintForm.get(field.name)?.touched">
                Please fill in the {{ field.label }} field.
              </small>
            </div>
          </div>
        </div>
      </div>
      <button type="submit" class="dc-form-button">Submit</button>
    </form>
  </div>
</div>
<app-footer></app-footer>
</section>